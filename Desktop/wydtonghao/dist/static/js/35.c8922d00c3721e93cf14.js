webpackJsonp([35],{"+Dvk":function(e,t,i){var n=i("7X7e");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("XkoO")("176aa11a",n,!0)},"7X7e":function(e,t,i){t=e.exports=i("YfG4")(!1),t.push([e.i,".text-center-master{background-attachment:fixed}.portrait{border-radius:50%}",""])},"9VcU":function(e,t,i){"use strict";function n(e){i("+Dvk")}Object.defineProperty(t,"__esModule",{value:!0});var a=i("dWDi"),s=i("Ywwc"),o=i("J0+h"),r=n,l=o(a.a,s.a,r,null,null);t.default=l.exports},Ywwc:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入职员名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.handleFilter(t)}}}),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")])],1),e._v(" "),i("el-table",{attrs:{data:e.ruleForm,border:"",height:"610"}},[i("el-table-column",{attrs:{align:"center",width:"80",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(t.row.id)+"\n\t\t\t\t")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",width:"120",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("img",{staticStyle:{width:"80px",heigh:"80px",margin:"8px","border-radius":"5%"},attrs:{src:e.row.avatar}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"position",align:"center",label:"职位"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",width:"120",align:"center",label:"姓名"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"设置权限",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"success"},on:{click:function(i){e.changeperms(t.row.id,t.row.name,t.row.avatar)}}},[e._v("\b配置权限\n          ")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:e.myname+"的角色与权限配置",visible:e.dialogTableVisible,width:"100%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("img",{staticStyle:{width:"120px",heigh:"120px",margin:"8px","border-radius":"50%"},attrs:{src:e.touxiang}}),e._v(" "),i("h3",[e._v("角色选择")]),e._v(" "),i("el-checkbox-group",{model:{value:e.change.permission_group_ids,callback:function(t){e.change.permission_group_ids=t},expression:"change.permission_group_ids"}},e._l(e.rolelist,function(t){return i("el-checkbox",{key:t.id,staticStyle:{height:"30px",width:"120px"},attrs:{label:t.id}},[e._v(e._s(t.name))])})),e._v(" "),i("h3",[e._v("权限选择")]),e._v(" "),i("el-checkbox-group",{model:{value:e.change.permission_ids,callback:function(t){e.change.permission_ids=t},expression:"change.permission_ids"}},e._l(e.checkList,function(t){return i("el-checkbox",{key:t.id,staticStyle:{height:"30px",width:"120px"},attrs:{label:t.id}},[e._v(e._s(t.name))])})),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogTableVisible2=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updatechange(e.myid)}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[60],"page-size":e.listQuery.limit,layout:" sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.listQuery.page=t}}})],1)},a=[],s={render:n,staticRenderFns:a};t.a=s},dWDi:function(e,t,i){"use strict";var n=i("BMa3"),a=i.n(n);t.a={data:function(){return{myid:"",touxiang:"",peopleRole:[],ruleForm:[],rolelist:[],permission:[],dialogTableVisible:!1,myname:"",newform:{name:"",permission_ids:[]},change:{permission_ids:[],permission_group_ids:[]},checkList:[],listQuery:{page:1,limit:60,total:"",totalPage:1}}},created:function(){this.gituser(),this.newrole(),this.getrole(),this.getthispeoplerole()},methods:{getthispeoplerole:function(){var e=this;a.a.get("/api/users/1/permissions").then(function(t){e.peopleRole=t.data.permission_groups[0].name,console.log(e.peopleRole)}).catch(function(e){alert(e)})},changeperms:function(e,t,i){this.dialogTableVisible=!0,this.myid=e,this.myname=t,this.touxiang=i},updatechange:function(e){var t=this;this.$confirm("此操作将永久修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogTableVisible=!1,a.a.post("/api/users/"+e+"/permissions",t.change).then(function(e){}).catch(function(e){console.log(e)}),t.$message({type:"success",message:"修改成功!"})}).catch(function(){t.dialogTableVisible1=!1,t.$message({type:"info",message:"已取消修改"})})},gituser:function(){var e=this;a.a.get("/api/users/").then(function(t){e.ruleForm=t.data.users,e.listQuery.total=t.data.meta.count}).catch(function(e){alert(e)})},getrole:function(){var e=this;a.a.get("/api/permission_groups").then(function(t){e.rolelist=t.data.permission_groups}).catch(function(e){alert(e)})},newrole:function(){var e=this;a.a.get("/api/permissions").then(function(t){e.checkList=t.data.permissions}).catch(function(e){alert(e)})},open2:function(){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleFilter:function(){},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()}}}}});