webpackJsonp([34],{NQWP:function(e,t,n){"use strict";var i=n("BMa3"),a=n.n(i);t.a={data:function(){return{myid:"",ruleForm:[],permission:[],dialogTableVisible1:!1,dialogTableVisible2:!1,newform:{name:"",permission_ids:[]},change:{name:"",permission_ids:[]},checkList:[],newArray:[],from:[]}},created:function(){this.gituser(),this.newrole()},methods:{changeperms:function(e,t){this.dialogTableVisible1=!0,this.myid=e,this.change.name=t},updatechange:function(e){var t=this;this.$confirm("此操作将永久修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogTableVisible1=!1,a.a.put("/api/permission_groups/"+e,t.change).then(function(e){console.log(e),t.gituser()}).catch(function(e){console.log(e)}),t.$message({type:"success",message:"修改成功!"})}).catch(function(){t.dialogTableVisible1=!1,t.$message({type:"info",message:"已取消修改"})})},updatenew:function(){var e=this;this.$confirm("此操作将永久新建, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogTableVisible2=!1,e.newroleapi(),e.$message({type:"success",message:"新建成功!"})}).catch(function(){e.dialogTableVisible2=!1,e.$message({type:"info",message:"已取消新建"})})},newroleapi:function(){var e=this;a.a.post("/api/permission_groups",this.newform).then(function(t){e.gituser()}).catch(function(t){alert(e.e.messages)})},resetForm:function(e){this.$refs[e].resetFields()},newroleopen:function(){this.dialogTableVisible2=!0},newrole:function(){var e=this;a.a.get("/api/permissions").then(function(t){e.checkList=t.data.permissions}).catch(function(e){alert(e)})},deldatperms:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.a.delete("/api/permission_groups/"+e).then(function(e){t.gituser()}).catch(function(e){}),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},gituser:function(){var e=this;a.a.get("/api/permission_groups").then(function(t){e.ruleForm=t.data.permission_groups,e.ruleForm.map(function(e){var t="";return e.permissions.forEach(function(e){t+=e.name,t+=" *"}),e.pName=t})}).catch(function(e){alert(e)})},open2:function(){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleFilter:function(){}}}},TvxQ:function(e,t,n){t=e.exports=n("YfG4")(!1),t.push([e.i,".text-center-master{background-attachment:fixed}.portrait{border-radius:50%}",""])},aoqG:function(e,t,n){var i=n("TvxQ");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("XkoO")("6da0caeb",i,!0)},opNj:function(e,t,n){"use strict";function i(e){n("aoqG")}Object.defineProperty(t,"__esModule",{value:!0});var a=n("NQWP"),s=n("yzo2"),o=n("J0+h"),l=i,c=o(a.a,s.a,l,null,null);t.default=c.exports},yzo2:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container calendar-list-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"搜索职员"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.handleFilter(t)}}}),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"edit"},on:{click:e.newroleopen}},[e._v("新建角色")]),e._v(" "),n("el-table",{attrs:{data:e.ruleForm,border:"",height:"610"}},[n("el-table-column",{attrs:{align:"center",width:"80",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t"+e._s(t.row.id)+"\n\t\t\t\t")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",width:"120",align:"center",label:"角色名"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"pName",label:"权限"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"修改权限",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"success"},on:{click:function(n){e.changeperms(t.row.id,t.row.name)}}},[e._v("修改权限\n                ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"130",align:"center",label:"删除角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger"},on:{click:function(n){e.deldatperms(t.row.id)}}},[e._v("删除角色\n                ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"修改\b该角色权限",visible:e.dialogTableVisible1,width:"100%"},on:{"update:visible":function(t){e.dialogTableVisible1=t}}},[n("h4",[e._v("权限选择")]),e._v(" "),n("el-checkbox-group",{model:{value:e.change.permission_ids,callback:function(t){e.change.permission_ids=t},expression:"change.permission_ids"}},e._l(e.checkList,function(t){return n("el-checkbox",{key:t.id,staticStyle:{height:"30px",width:"160px"},attrs:{label:t.id}},[e._v(e._s(t.name))])})),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogTableVisible2=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updatechange(e.myid)}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"新建角色",visible:e.dialogTableVisible2,width:"100%"},on:{"update:visible":function(t){e.dialogTableVisible2=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"角色名称"}},[n("el-input",{attrs:{"auto-complete":"true"},model:{value:e.newform.name,callback:function(t){e.newform.name=t},expression:"newform.name"}})],1)],1),e._v(" "),n("h4",[e._v("权限选择")]),e._v(" "),n("el-checkbox-group",{model:{value:e.newform.permission_ids,callback:function(t){e.newform.permission_ids=t},expression:"newform.permission_ids"}},e._l(e.checkList,function(t){return n("el-checkbox",{key:t.id,staticStyle:{height:"30px",width:"160px"},attrs:{label:t.id}},[e._v(e._s(t.name))])})),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogTableVisible2=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.updatenew}},[e._v("确 定")])],1)],1)],1)])},a=[],s={render:i,staticRenderFns:a};t.a=s}});